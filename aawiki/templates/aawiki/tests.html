{% extends "aawiki/base.html" %}
{% load compress %}

{% block extrahead %}
{{ block.super }}
<script type="text/template" id="page-view-template">
{% include "aawiki/partials/page-view.html" %}
</script>
<script type="text/template" id="user-view-template">
{% include "aawiki/partials/user-view.html" %}
</script>
<script type="text/template" id="annotation-view-template">
{% include "aawiki/partials/annotation-view.html" %}
</script>
<script type="text/template" id="annotation-edit-template">
{% include "aawiki/partials/annotation-edit.html" %}
</script>
{% endblock %}

{% block css %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}components/jasmine/lib/jasmine-core/jasmine.css">
<link rel="stylesheet" href="{{ STATIC_URL }}components/jquery-ui/themes/base/minified/jquery-ui.min.css">
<link rel="stylesheet" href="{{ STATIC_URL }}components/jquery.contextual/aa.jquery.contextual.css">
<link rel="stylesheet" href="{{ STATIC_URL }}components/mediaelement/build/mediaelementplayer.css" />

{% if debug %}
<!-- This is the client-side way to compile less and an ok choice for local dev -->
<link rel="stylesheet/less" type="text/css" media="all" href="{{ STATIC_URL }}aawiki/css/aa.wiki.less" />
{% else %}
{% compress css %}
<!-- This is the nifty django-compressor way to compile your less files in css -->
<link rel="stylesheet/less" type="text/css" media="all" href="{{ STATIC_URL }}aawiki/css/aa.wiki.less" />
{% endcompress %}
{% endif %}

<style>
body {
    width: inherit;
    height: inherit;
}
article#canvas {
    box-sizing: border-box;
    padding-right: 420px;
}
#HTMLReporter {
    box-sizing: border-box;
    width: 420px;
    min-height: 100%;
    padding: 10px;
    position: absolute;
    top: 0px;
    right: 0px;
    background-color: #eeeeee;
}
</style>
{% endblock %}


{% block body %}
<nav id="sidebar">
    
    <div id="user-meta-container">
    </div>
    <div id="page-meta-container">
    </div>

</nav>
<div id="baseplayer">
</div>
<article id="canvas">
    <div class="wrapper"></div>
</article>
<div class="error">
</div>


{% endblock %}

{% block js %}
{{ block.super }}
{% if debug %}
<!-- This is the client-side way to compile less and an ok choice for local dev -->
<script src="{{ STATIC_URL }}components/less/dist/less-1.5.1.min.js"></script>
{% endif %}

<script src="{{ STATIC_URL }}components/typogr.js/typogr.min.js"></script>

<script src="{{ STATIC_URL }}components/jasmine/lib/jasmine-core/jasmine.js"></script>
<script src="{{ STATIC_URL }}components/jasmine/lib/jasmine-core/jasmine-html.js"></script>

<script src="{{ STATIC_URL }}components/jquery/jquery.min.js"></script>

<script src="{{ STATIC_URL }}components/jasmine-jquery/lib/jasmine-jquery.js"></script>

<script src="{{ STATIC_URL }}components/jquery-ui/ui/minified/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}components/underscore/underscore-min.js"></script>
<script src="{{ STATIC_URL }}components/backbone/backbone-min.js"></script>
<script src="{{ STATIC_URL }}components/backbone-tastypie/backbone_tastypie/static/js/backbone-tastypie.js"></script>
<script src="{{ STATIC_URL }}components/backbone-relational/backbone-relational.js"></script>

<script src="{{ STATIC_URL }}components/popcorn-js/popcorn-complete.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/plugins/aa.popcorn.js"></script>

<script src="{{ STATIC_URL }}components/jquery.contextual/aa.jquery.contextual.js"></script>

<script src="{{ STATIC_URL }}aawiki/js/utils.js"></script>

<script src="{{ STATIC_URL }}aawiki/js/plugins/aa.jquery.renderResources.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/markup/markdown.js"></script>

<script src="{{ STATIC_URL }}aawiki/js/models.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/collections.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/views.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/global-events.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/router.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/error-handling.js"></script>

<script src="{{ STATIC_URL }}aawiki/js/tests/utils.js"></script>
<script src="{{ STATIC_URL }}aawiki/js/tests/views.js"></script>


<script type="text/javascript">
    (function () {
        var jasmineEnv = jasmine.getEnv();
        jasmineEnv.updateInterval = 1000;

        var htmlReporter = new jasmine.HtmlReporter();

        jasmineEnv.addReporter(htmlReporter);

        jasmineEnv.specFilter = function (spec) {
            return htmlReporter.specFilter(spec);
        };

        var currentWindowOnload = window.onload;

        window.onload = function () {
            if (currentWindowOnload) {
                currentWindowOnload();
            }
            execJasmine();
        };

        function execJasmine() {
            jasmineEnv.execute();
        }

    })();
</script>

{% endblock %}
